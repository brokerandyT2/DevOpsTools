# Using the Mobile Adapter Generator with JavaScript

This document provides a comprehensive guide for generating native mobile data models from a JavaScript (ES6+) codebase.

## 1. Core Concept: Source File Analysis

The generator works with JavaScript by parsing `.js` source files directly. It looks for modern ES6 `class` syntax and analyzes their structure to create the corresponding native mobile models. It does not execute the code or require a bundled output.

## 2. How to Mark Classes for Discovery

Since JavaScript does not have a standardized, built-in annotation system like other languages, discovery is driven by a special **JSDoc comment block** placed directly above a `class` definition.

#### Step 1: Add the Tracking JSDoc Block
Place a JSDoc block containing the tag `@YourTrackAttribute` on the lines immediately preceding the `class` definition. The `TrackAttribute` is a simple marker that you define.

```javascript
/**
 * Represents a user's preferences for the application.
 * @TrackableModel
 */
export class UserPreferences {
    /**
     * @param {string} theme - The name of the UI theme (e.g., 'dark', 'light').
     * @param {boolean} notificationsEnabled - Whether push notifications are enabled.
     * @param {number[]} favoriteCategoryIds - A list of favorite category IDs.
     */
    constructor(theme, notificationsEnabled, favoriteCategoryIds) {
        /** @type {string} */
        this.theme = theme || 'light';

        /** @type {boolean} */
        this.notificationsEnabled = notificationsEnabled === true;

        /** @type {number[]} */
        this.favoriteCategoryIds = favoriteCategoryIds || [];
    }
}

/**
 * Represents a basic user profile.
 * @TrackableModel
 */
export class UserProfile {
    constructor(id, email) {
        /** @type {string} */
        this.id = id;

        /** @type {string} */
        this.email = email;
    }
}
Key Points:
The JSDoc block must start with /** and end with */.
The tracking tag (e.g., @TrackableModel) must be on its own line within the block.
The generator analyzes property assignments within the constructor (e.g., this.theme = ...) to discover properties.
While not required by the generator, including @type annotations for properties is a highly recommended best practice as it improves the accuracy of type inference.
3. Configuration
You must configure the generator using environment variables in your CI/CD pipeline.
Crucial JavaScript Variables:
LANGUAGE_JAVASCRIPT: Must be set to true.
TRACK_ATTRIBUTE: The marker used in your JSDoc tracking tag (e.g., TrackableModel).
SOURCE_PATHS: A semicolon-separated list of paths inside the container where your .js source files are located.
Example Configuration for Android (Kotlin) Generation
code
Bash
# 1. Language and Platform
LANGUAGE_JAVASCRIPT=true
PLATFORM_ANDROID=true

# 2. Discovery Method
# Find all classes with the "/** @TrackableModel */" JSDoc block
TRACK_ATTRIBUTE=TrackableModel

# 3. Source Path (CRITICAL)
# Path to the directory containing your JavaScript models
SOURCE_PATHS=/src/src/models

# 4. Core Config
REPO_URL="https://github.com/my-org/my-react-native-app"
BRANCH="main"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
ANDROID_OUTPUT_DIR=./android
ANDROID_PACKAGE_NAME="com.mycompany.app.models"
Example Configuration for iOS (Swift) Generation
Note the change in PLATFORM_* and output variables.
code
Bash
# 1. Language and Platform
LANGUAGE_JAVASCRIPT=true
PLATFORM_IOS=true

# 2. Discovery Method
TRACK_ATTRIBUTE=TrackableModel

# 3. Source Path (CRITICAL)
SOURCE_PATHS=/src/src/models

# 4. Core Config
REPO_URL="https://github.com/my-org/my-react-native-app"
BRANCH="main"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
IOS_OUTPUT_DIR=./ios
IOS_MODULE_NAME="SharedModels"
4. Expected Output
Based on the JavaScript examples above, the generator will produce the following files.
Generated Kotlin (UserPreferences.kt)
code
Kotlin
package com.mycompany.app.models

data class UserPreferences(
    val theme: String,
    val notificationsEnabled: Boolean,
    val favoriteCategoryIds: List<Double>
)
Generated Swift (UserProfile.swift)
code
Swift
// Generated by 3SC Mobile Adapter Generator
import Foundation

struct UserProfile: Codable {
    let id: String
    let email: String
}
5. Type Mapping Reference
The following table shows how JavaScript types (inferred from JSDoc and default values) are mapped to their Kotlin and Swift equivalents.
JavaScript Type	Inferred From	Kotlin Type	Swift Type
string	'hello', "world"	String	String
number	123, 45.6	Double	Double
boolean	true, false	Boolean	Bool
Array	[]	List<Any>	[Any]
object	{}	Map<String, Any>	[String: Any]
any	null, undefined	Any?	Any?
Note: Due to JavaScript's dynamic nature, type inference is less precise than with statically-typed languages. Using JSDoc @type annotations is strongly recommended to improve accuracy. For complex or project-specific types, use CUSTOM_TYPE_MAPPINGS.
6. Troubleshooting
Error: No classes found.
Is the JSDoc format correct? Ensure it starts with /**, ends with */, and the @YourTrackAttribute is on its own line.
Is the JSDoc block directly above the class keyword? There can be no other code or comments between the closing */ and the class keyword.
Is SOURCE_PATHS correct? The path must point to your JavaScript source directory within the container's /src volume mount.
Are you using ES6 classes? The generator does not support older prototype-based "classes".