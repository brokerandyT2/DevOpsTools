# Using the Mobile Adapter Generator with TypeScript

This document provides a comprehensive guide for generating native mobile data models from a TypeScript codebase. TypeScript's strong typing makes it an ideal source of truth.

## 1. Core Concept: Source File Analysis

The generator works with TypeScript by parsing `.ts` source files directly. It does not require a compiled JavaScript output. The engine looks for exported `class` or `interface` definitions that are marked with a specific decorator and analyzes their properties and types.

## 2. How to Mark Classes for Discovery

The recommended method is to use a custom decorator. The generator's documentation server provides a ready-made decorator file for you to use. This requires enabling decorator support in your TypeScript configuration.

#### Step 1: Enable Decorators in `tsconfig.json`
You must enable `experimentalDecorators` in your project's `tsconfig.json` file.

```json
{
  "compilerOptions": {
    "target": "ES2021",
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    // ... other options
  }
}
Step 2: Get the Tracking Decorator
Download the decorators.ts file from the generator's documentation server (running on port 8080 in the container) and add it to a shared location in your project.
code
Bash
# Example: Download the decorator into your project
curl http://localhost:8080/typescript > ./src/shared/decorators.ts
The downloaded file will contain a simple identity decorator:
code
TypeScript
// src/shared/decorators.ts
export function TrackableDTO(constructor: Function) {
    // This decorator only serves as a marker for the generator.
}
Step 3: Apply the Decorator to Your DTOs
Now, import and apply this decorator to any class or interface you want the generator to discover.
code
TypeScript
import { TrackableDTO } from '../shared/decorators';

@TrackableDTO
export interface LocationPin {
    id: string; // UUID
    latitude: number;
    longitude: number;
    title: string;
    description?: string; // Optional property
    tags: string[];
    metadata: Record<string, any>;
}

@TrackableDTO
export class EventSchedule {
    id: number;
    eventName: string;
    startTime: Date;
    isAllDay: boolean;
    attendees: LocationPin[];
}
3. Configuration
You must configure the generator using environment variables in your CI/CD pipeline.
Crucial TypeScript Variables:
LANGUAGE_TYPESCRIPT: Must be set to true.
TRACK_ATTRIBUTE: The name of the decorator you are using (e.g., TrackableDTO).
SOURCE_PATHS: A semicolon-separated list of paths inside the container where your .ts source files are located.
Example Configuration for Android (Kotlin) Generation
code
Bash
# 1. Language and Platform
LANGUAGE_TYPESCRIPT=true
PLATFORM_ANDROID=true

# 2. Discovery Method
# Find all classes/interfaces with the @TrackableDTO decorator
TRACK_ATTRIBUTE=TrackableDTO

# 3. Source Path (CRITICAL)
# Path to the directory containing your TypeScript models
SOURCE_PATHS=/src/app/src/models

# 4. Core Config
REPO_URL="https://github.com/my-org/my-react-native-app"
BRANCH="feature/new-event-models"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
ANDROID_OUTPUT_DIR=./android
ANDROID_PACKAGE_NAME="com.mycompany.app.models"
Example Configuration for iOS (Swift) Generation
Note the change in PLATFORM_* and output variables.
code
Bash
# 1. Language and Platform
LANGUAGE_TYPESCRIPT=true
PLATFORM_IOS=true

# 2. Discovery Method
TRACK_ATTRIBUTE=TrackableDTO

# 3. Source Path (CRITICAL)
SOURCE_PATHS=/src/app/src/models

# 4. Core Config
REPO_URL="https://github.com/my-org/my-react-native-app"
BRANCH="feature/new-event-models"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
IOS_OUTPUT_DIR=./ios
IOS_MODULE_NAME="SharedModels"
4. Expected Output
Based on the TypeScript examples above, the generator will produce the following files.
Generated Kotlin (LocationPin.kt)
code
Kotlin
package com.mycompany.app.models

import java.util.UUID

data class LocationPin(
    val id: UUID,
    val latitude: Double,
    val longitude: Double,
    val title: String,
    val description: String?,
    val tags: List<String>,
    val metadata: Map<String, Any>
)
Generated Swift (EventSchedule.swift)
code
Swift
// Generated by 3SC Mobile Adapter Generator
import Foundation

struct EventSchedule: Codable {
    let id: Int64
    let eventName: String
    let startTime: Date
    let isAllDay: Bool
    let attendees: [LocationPin]
}
5. Type Mapping Reference
The following table shows how common TypeScript types are mapped.
TypeScript Type	Kotlin Type	Swift Type
string	String	String
number	Double	Double
boolean	Boolean	Bool
Date	LocalDateTime	Date
any	Any	Any
T[] or Array<T>	List<T>	[T]
Record<K,V>	Map<K,V>	[K:V]
`T	nullorT	undefined`
property?: T	T?	T?
6. Troubleshooting
Error: No classes found.
Is experimentalDecorators enabled? Check your tsconfig.json.
Is SOURCE_PATHS correct? The path must point to your TypeScript source directory within the container's /src volume mount.
Does the decorator name match? The string in TRACK_ATTRIBUTE must exactly match the name of your decorator function (e.g., TrackableDTO).
Are your classes/interfaces exported? The generator typically only looks for exported types.