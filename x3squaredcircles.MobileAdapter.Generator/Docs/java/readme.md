# Using the Mobile Adapter Generator with Java

This document provides a comprehensive guide for generating native mobile data models from a Java codebase.

## 1. Core Concept: Source File Analysis

The generator works with Java by parsing `.java` source files directly. It does not require compiled `.class` files or `.jar` archives. It searches for class definitions and analyzes their annotations, fields, and methods to create the mobile models.

## 2. How to Mark Classes for Discovery

The recommended method for marking Java classes is by using a custom annotation. The generator's documentation server provides a ready-made annotation file for you to use.

#### Step 1: Get the Tracking Annotation
Download the `TrackableDTO.java` file from the generator's documentation server (running on port 8080 in the container) and add it to your Java project's source tree.

```bash
# Example: Download the annotation into your project
curl http://localhost:8080/java > ./src/main/java/com/mycompany/shared/annotations/TrackableDTO.java
The downloaded file will look like this:
code
Java
package com.mycompany.shared.annotations; // Adjust package as needed

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.SOURCE) // Retained for source-level tools
@Target(ElementType.TYPE)
public @interface TrackableDTO {
}
Step 2: Apply the Annotation to Your DTOs
Now, import and apply this annotation to any class you want the generator to discover.
code
Java
package com.mycompany.shared.dtos;

import com.mycompany.shared.annotations.TrackableDTO;
import java.util.List;
import java.util.Map;
import java.util.UUID;

@TrackableDTO
public class Itinerary {
    private UUID id;
    private String name;
    private int durationDays;
    private boolean isPublic;
    private List<FlightSegment> flights;
    private Map<String, String> notes;

    // Getters and setters...
}

@TrackableDTO
public class FlightSegment {
    public String airline;
    public String flightNumber;
    public int stops;
    // Getters and setters...
}
3. Configuration
You must configure the generator using environment variables in your CI/CD pipeline.
Crucial Java Variables:
LANGUAGE_JAVA: Must be set to true.
TRACK_ATTRIBUTE: The simple name of the annotation class (e.g., TrackableDTO).
SOURCE_PATHS: A semicolon-separated list of paths inside the container to your Java source directories (e.g., /src/src/main/java).
Example Configuration for Android (Kotlin) Generation
code
Bash
# 1. Language and Platform
LANGUAGE_JAVA=true
PLATFORM_ANDROID=true

# 2. Discovery Method
# Find all classes with the @TrackableDTO annotation
TRACK_ATTRIBUTE=TrackableDTO

# 3. Source Path (CRITICAL)
# Path to the directory containing your Java source files
SOURCE_PATHS=/src/my-shared-library/src/main/java

# 4. Core Config
REPO_URL="https://github.com/my-org/my-repo"
BRANCH="develop"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
ANDROID_OUTPUT_DIR=./android
ANDROID_PACKAGE_NAME="com.mycompany.app.models"
Example Configuration for iOS (Swift) Generation
Note the change in PLATFORM_* and output variables.
code
Bash
# 1. Language and Platform
LANGUAGE_JAVA=true
PLATFORM_IOS=true

# 2. Discovery Method
TRACK_ATTRIBUTE=TrackableDTO

# 3. Source Path (CRITICAL)
SOURCE_PATHS=/src/my-shared-library/src/main/java

# 4. Core Config
REPO_URL="https://github.com/my-org/my-repo"
BRANCH="develop"
LICENSE_SERVER="https://license.my-company.com"

# 5. Output Config
OUTPUT_DIR=/src/generated-mobile-models
IOS_OUTPUT_DIR=./ios
IOS_MODULE_NAME="SharedModels"
4. Expected Output
Based on the Java examples above, the generator will produce the following files.
Generated Kotlin (Itinerary.kt)
code
Kotlin
package com.mycompany.app.models

import java.util.UUID

data class Itinerary(
    val id: UUID,
    val name: String,
    val durationDays: Int,
    val isPublic: Boolean,
    val flights: List<FlightSegment>,
    val notes: Map<String, String>
)
Generated Swift (FlightSegment.swift)
code
Swift
// Generated by 3SC Mobile Adapter Generator
import Foundation

struct FlightSegment: Codable {
    let airline: String
    let flightNumber: String
    let stops: Int32
}
5. Type Mapping Reference
The following table shows how common Java types are mapped to their Kotlin and Swift equivalents.
Java Type	Kotlin Type	Swift Type
String	String	String
int, Integer	Int	Int32
long, Long	Long	Int64
boolean, Boolean	Boolean	Bool
double, Double	Double	Double
float, Float	Float	Float
BigDecimal	BigDecimal	Decimal
Date, LocalDateTime	LocalDateTime	Date
OffsetDateTime	OffsetDateTime	Date
UUID	UUID	UUID
List<T>	List<T>	[T]
Map<K,V>	Map<K,V>	[K:V]
Set<T>	Set<T>	Set<T>
For any types not listed, you can provide a CUSTOM_TYPE_MAPPINGS JSON string in your configuration.
6. Troubleshooting
Error: No classes found.
Is SOURCE_PATHS correct? The path must point to your Java source root (e.g., the java folder inside src/main) within the container's /src volume mount.
Does the attribute name match? The string in TRACK_ATTRIBUTE must exactly match the simple class name of your annotation (e.g., TrackableDTO).
Are the files .java files? The engine only parses source code, not compiled .class files.